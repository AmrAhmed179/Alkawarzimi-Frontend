<div mat-dialog-title class="text-center bg-orange-500 h-14 ">
    <h1 class="text-2xl text-slate-50 pt-3">Conversation Steps</h1>
</div>
<!-- <p>{{response}}</p> -->

<mat-dialog-content class="h-3/4" id="ontent-to-download">
    <div *ngFor="let step of this.data.steps" class="flex flex-col  items-end">
        <div *ngIf="step.input">
            <p class="mx-5 my-2 text-base font-medium bg-lime-200 p-3 rounded-tr-md rounded-bl-md flex flex-col" dir="rtl">{{step.input}} <span class="mx-1 text-[11px] text-red-600 ">  NodeId:&nbsp;{{step.nodeId}} &nbsp;{{changeDateFormate(step.createdTime)}}</span></p>
        </div>

        <div *ngIf="step.output">
            <div *ngFor="let response of step.output.Responses" class="pr-5">

                <div class="mx-5 my-2 bg-slate-200 p-3 rounded-tr-md rounded-bl-md" dir="rtl" *ngIf="response.type === 'text'">
                    <p color="red text-base font-medium" class="mt-3" [innerHtml]="getTextResponse(response)"></p>
                </div>
                <div class="mx-5 my-2 bg-slate-200 p-3 rounded-tr-md rounded-bl-md" dir="rtl" *ngIf="response.type === 'yesno'">
                    <p class="mt-3" [innerHtml]="getTextResponse(response)"></p>
                </div>

                <div class="mx-5 my-2 bg-slate-200 p-3 rounded-tr-md rounded-bl-md" dir="rtl" *ngIf="response.type === 'options'">
                    <p class="text-base font-medium">{{response.title}}</p>
                    <p *ngFor="let responseOptions of response.rOptions" class="border border-blue-900 rounded bg-white p-2 text-blue-900 text-base font-bold my-1 hover:bg-blue-900 hover:text-white">{{responseOptions.title}}</p>
                </div>

                <div class="mx-5 my-2 bg-slate-200 p-3 rounded-tr-md rounded-bl-md" dir="rtl" *ngIf="response.type === 'list'">
                    <p class="text-base font-medium" [innerHtml]="response.title"></p>
                    <p *ngFor="let responseOptions of response.rOptions" class="border border-blue-900 rounded bg-white p-2 text-blue-900 text-base font-bold my-1 hover:bg-blue-900 hover:text-white" [innerHtml]="responseOptions.title"></p>
                </div>
            </div>
        </div>
    </div>



</mat-dialog-content>

<mat-divider></mat-divider>
<mat-dialog-actions align="end">
    <button mat-button (click)="save()" class="rounded-sm">download</button>
    <button mat-button mat-dialog-close class="rounded-sm">Close</button>
</mat-dialog-actions>


<!-- repeat this div to download -->
<div>
    <div style="" id="content-to-download" hidden>
        <div style=" text-align: center; background-color: rgb(249 115 22); height: 56px;">
            <h1 style="font-size:24px; line-height :24px ; color: rgb(248 250 252 ); padding-top:12px; padding-right: 200px;">Conversation Steps</h1>
        </div>
        <div *ngFor="let step of this.data.steps" style="display: flex; flex-direction: column; align-items: flex-end;padding-right: 200px;">
            <div *ngIf="step.input">
                <p style="margin-left: 20px; margin-right:20 px ; background-color: rgb(217 249 157 ); margin-top: 8px ; margin-bottom: 8px; padding: 12px ;border-top-right-radius: 2px;  border-bottom-left-radius:2px" dir="rtl">{{step.input}}</p>
            </div>

            <div *ngIf="step.output">
                <div *ngFor="let response of step.output.Responses" style=" padding-right:20px" class="pr-5">

                    <div style="margin-left: 20px; margin-right:20 px; margin-top: 8px ; margin-bottom: 8px;background-color: rgb(226 232 240);padding:12px; border-top-right-radius:2px;border-bottom-left-radius:2px" dir="rtl" *ngIf="response.type === 'text'">
                        <p class="mt-3" [innerHtml]="getTextResponse(response)"></p>
                    </div>
                    <div style="margin-left: 20px; margin-right:20 px; margin-top: 8px ; margin-bottom: 8px;background-color: rgb(226 232 240);padding:12px; border-top-right-radius:2px;border-bottom-left-radius:2px" dir="rtl" *ngIf="response.type === 'yesno'">
                        <p class="mt-3" [innerHtml]="getTextResponse(response)"></p>
                    </div>

                    <div style="margin-left: 20px; margin-right:20 px; margin-top: 8px ; margin-bottom: 8px;background-color: rgb(226 232 240);padding:12px; border-top-right-radius:2px;border-bottom-left-radius:2px" dir="rtl" *ngIf="response.type === 'options'">
                        <p>{{response.title}}</p>
                        <p style=" border-width: 1px; border-color: rgb(30 58 138);border-radius:5px;  background-color: rgb(255 255 255); padding: 8px; color: rgb(30 58 138); font-size: 16px;line-height:24px;font-weight: 700; margin-top:4px;margin-right: 4px ;" *ngFor="let responseOptions of response.rOptions">{{responseOptions.title}}</p>
                    </div>

                    <div style="margin-left: 20px; margin-right:20 px; margin-top: 8px ; margin-bottom: 8px;background-color: rgb(226 232 240);padding:12px; border-top-right-radius:2px;border-bottom-left-radius:2px" dir="rtl" *ngIf="response.type === 'list'">
                        <p [innerHtml]="response.title"></p>
                        <p *ngFor="let responseOptions of response.rOptions" style=" border-width: 1px; border-color: rgb(30 58 138);border-radius:5px;  background-color: rgb(255 255 255); padding: 8px; color: rgb(30 58 138); font-size: 16px;line-height:24px;font-weight: 700; margin-top:4px;margin-right: 4px ;"
                            [innerHtml]="responseOptions.title"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>