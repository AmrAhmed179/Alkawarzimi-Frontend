<div class="grid grid-cols-11 gap-4 p-4 containerHight overflow-auto">

    <div class="col-span-3 border p-3">
        <div class="flex justify-between gap-2 mb-2 items-center">
            <div class="flex gap-2">
                <button [ngClass]="{'active':tapNameValue == 'allConversations'}" class="buttonTap " (click)="tapName('allConversations')">All Conversations</button>
                <button [ngClass]="{'active':tapNameValue == 'onlineConversations'}" class="buttonTap " (click)="tapName('onlineConversations')">Online Conversations</button>
            </div>

            <div class="flex gap-2">
                <button *ngIf="tapNameValue == 'allConversations'" matTooltip="Filter Data" class="  mb-2" (click)="openFilterDialog()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                </svg>
           </button>
                <button class="text-" (click)="refreshData()"><mat-icon class="text-[#eb9041] icon-lg" matTooltip="Refresh Data" svgIcon="mat:cached"></mat-icon></button>
            </div>

        </div>

        <div *ngFor="let item of conversationsList" style="word-wrap: break-word;" class="bg-slate-200 p-2 my-1 rounded-sm hover:bg-slate-100" (click)="getSessionHistory(item)" [ngClass]="{'selectedConversatioBg': item == selectedSessionId}">
            <p class="text-[14px]">{{item}} </p>
        </div>
        <mat-paginator [ngClass]="{'displayNone':tapNameValue == 'onlineConversations'}" #paginator class="" [showFirstLastButtons]="true" [length]="totalItems" [pageSize]="pageSize" aria-label="Select page"></mat-paginator>

    </div>

    <div class="col-span-8 border h-full overflow-auto px-3">
        <div *ngIf="totalCost" class="mt-2 border rounded-md p-2 w-[16%] flex justify-center">
            <p *ngIf="totalCost" class="text-[14px] font-medium ">TotalCost: <span>{{totalCost | number:'1.7-7'}}</span></p>
        </div>
        <div *ngFor="let message of selectedSession" class="message-card relative" [ngClass]="message.Role">
            <div class="role">{{ message.Role | titlecase }}</div>
            <div class="content">{{ message.Content }}</div>

            <div *ngIf="message.ToolCalls?.length" class="tool-calls">
                <h4>Tool Calls:</h4>
                <ul>
                    <li *ngFor="let call of message.ToolCalls">
                        <strong>{{ call.FunctionName }}</strong>
                        <pre>{{ call.FunctionArgumentsJson }}</pre>
                    </li>
                </ul>
            </div>
            <div class="flex gap-3 absolute bottom-0 right-2">
                <!-- <p> <span>Creted At:</span> {{ new Date(+message.createdAt.replace(/\D/g,'')) | date:'medium' }}</p> -->
                <p class="text-xs text-gray-600 font-semibold"> <span>Step: </span>{{ message?.step}}</p>
                <p class="text-xs text-gray-600 font-semibold"> <span>CretedAt: </span>{{ message?.createdAt | parseDate | date:'medium' }}</p>
                <p [ngClass]="{'redColor':message.elapsedTime != 0}" class="text-xs text-gray-600 font-semibold"> <span>Cost:</span> {{message?.cost | number:'1.0-7'}}</p>
                <p [ngClass]="{'redColor':message.elapsedTime != 0}" class="text-xs text-gray-600 font-semibold"> <span>ElapsedTime: </span>{{message?.elapsedTime | number:'1.0-7'}}</p>
            </div>
        </div>
    </div>
</div>